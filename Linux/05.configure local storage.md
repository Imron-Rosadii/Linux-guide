---
# **5ï¸âƒ£ Mengonfigurasi Penyimpanan Lokal (Configure Local Storage â€“ RHEL Style)**

Bagian ini mencakup **manajemen disk, partisi, dan LVM**.
Ini adalah **materi inti RHCSA** dan **skill wajib SysAdmin**.
---

## **5.a Membuat Partisi pada Disk GPT**

### ğŸ“Œ Penjelasan

- **Disk fisik** harus dipartisi sebelum digunakan
- **GPT (GUID Partition Table)** adalah skema partisi modern
- Mendukung:

  - disk > 2 TB
  - lebih banyak partisi

- Tool yang umum digunakan:

  - `gdisk` (GPT)
  - `parted`

---

### ğŸ“Œ Identifikasi Disk

```bash
lsblk
```

Contoh disk baru:

```text
/dev/sdb
```

âš ï¸ **Pastikan disk benar, jangan salah pilih (`/dev/sda`)**

---

### ğŸ“Œ Membuat Partisi GPT (gdisk)

```bash
sudo gdisk /dev/sdb
```

Di dalam `gdisk`:

```text
n        # new partition
[Enter]  # nomor partisi default
[Enter]  # sector awal default
[Enter]  # sector akhir default (atau +5G)
8300     # Linux filesystem
w        # write perubahan
Y        # konfirmasi
```

---

### ğŸ“Œ Verifikasi Partisi

```bash
lsblk
```

Hasil contoh:

```text
/dev/sdb1
```

---

## **5.b Menggunakan LVM (Logical Volume Manager)**

### ğŸ“Œ Penjelasan

LVM memberikan **fleksibilitas tinggi**:

- Resize storage tanpa downtime
- Abstraksi dari disk fisik
- Digunakan hampir di semua server Linux modern

---

### ğŸ“Œ Komponen LVM

| Komponen             | Arti                          |
| -------------------- | ----------------------------- |
| PV (Physical Volume) | Disk / partisi fisik          |
| VG (Volume Group)    | Kumpulan PV                   |
| LV (Logical Volume)  | Volume virtual (dipakai user) |

---

### ğŸ“Œ Alur LVM (Wajib Diingat)

```text
Disk â†’ Partition â†’ PV â†’ VG â†’ LV â†’ Filesystem â†’ Mount
```

---

### ğŸ“Œ Langkah 1: Buat Physical Volume (PV)

```bash
sudo pvcreate /dev/sdb1
```

Cek:

```bash
pvs
```

---

### ğŸ“Œ Langkah 2: Buat Volume Group (VG)

```bash
sudo vgcreate vg_data /dev/sdb1
```

Cek:

```bash
vgs
```

---

### ğŸ“Œ Langkah 3: Buat Logical Volume (LV)

```bash
sudo lvcreate -L 10G -n lv_apps vg_data
```

Cek:

```bash
lvs
```

---

### ğŸ“Œ Langkah 4: Format Logical Volume

```bash
sudo mkfs.ext4 /dev/vg_data/lv_apps
```

---

### ğŸ“Œ Langkah 5: Buat Mount Point

```bash
sudo mkdir -p /data/apps
```

---

### ğŸ“Œ Langkah 6: Mount Filesystem

```bash
sudo mount /dev/vg_data/lv_apps /data/apps
```

Verifikasi:

```bash
df -h
```

---

## **5.c Mengonfigurasi Mount Otomatis Saat Boot**

### ğŸ“Œ Penjelasan

- Mount manual **hilang setelah reboot**
- Agar permanen â†’ gunakan **/etc/fstab**
- **UUID lebih aman** daripada nama device

---

### ğŸ“Œ Dapatkan UUID

```bash
sudo blkid /dev/vg_data/lv_apps
```

Contoh output:

```text
UUID="a1b2c3d4-e5f6-7890-1234-567890abcdef"
```

---

### ğŸ“Œ Edit /etc/fstab

```bash
sudo nano /etc/fstab
```

Tambahkan baris:

```text
UUID=a1b2c3d4-e5f6-7890-1234-567890abcdef  /data/apps  ext4  defaults  0 0
```

---

### ğŸ“Œ Test Konfigurasi (WAJIB!)

```bash
sudo umount /data/apps
sudo mount -a
df -h
```

âœ” Jika tidak ada error â†’ konfigurasi benar
âŒ Error di `fstab` bisa menyebabkan **boot gagal**

---

## **5.d Perintah Monitoring Storage**

```bash
lsblk
df -h
mount
```

---

## **5.e Contoh Kasus SysAdmin**

### ğŸ“Œ Menambah Storage Aplikasi

```bash
lvextend -L +5G /dev/vg_data/lv_apps
resize2fs /dev/vg_data/lv_apps
```

ğŸ“Œ Filesystem **bertambah tanpa unmount**

---
